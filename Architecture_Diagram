graph TD
    subgraph Frontend
        UI[UI / Interactive Form]
    end

    subgraph Backend
        subgraph Controller
            C[Controller / Flow Logic]
        end

        subgraph Model
            M[JSON central: clinicalSummarySchema]
        end

        subgraph Persister
            P[DB / Cache for Partial State]
        end

        subgraph AI_Service
            AI[AI / Suggestion and Summary Generation Engine]
        end
    end

    %% Endpoints as controller subcomponents
    subgraph Endpoints
        E1[/consultation/]
        E2[/medical-history/]
        E3[/allergies/]
        E4[/medications/]
        E5[/anamnesis/]
        E6[/physical-examinations/]
        E7[/summary/]
    end

    %% Relationships
    UI --> C
    C --> P
    C <--> E1
    C <--> E2
    C <--> E3
    C <--> E4
    C <--> E5
    C <--> E6
    C <--> E7
    AI --> M
    P --> M
    M --> AI
    M --> UI
